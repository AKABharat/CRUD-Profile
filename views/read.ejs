<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Profile</title>

    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- Custom stylesheet -->
    <link rel="stylesheet" href="/BACKEND/DATABASE SERVER/USER_CRUD_MINI_PROJECT/public/stylesheets/style.css">
  </head>

  <body class="bg-zinc-900 font-mono text-zinc-100 min-h-screen flex flex-col">

    <!-- main content -->
    <main class="flex-grow p-10">

      <!-- Page Header -->
      <div class="ml-5 mr-5">
        <h1 class="text-4xl font-bold text-zinc-300">CRUD Profile</h1>

        <!-- Subheader: All Profiles title and back link -->
        <div class="font-medium text-zinc-800 mt-10 mb-5 flex justify-between">
          <div class=" text-blue-600 text-2xl ">All Profiles </div>
          <a class="text-zinc-500 text-xl" href="/">Back ></a>
        </div>
      </div>

      <div>
        <!-- Conditional rendering: Show message if no users -->
        <% if(users.length==0){ %>
          <div class="center text-zinc-400">No Users</div>

          <% }else{ %>
            <!-- Display user cards in responsive grid -->
            <div class="users grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 justify-items-center">

              <!-- Loop through each user -->
              <% users.forEach((user)=>{ %>

                <!-- Single user card -->
                <div class="user p-3 border-1 border-zinc-800 rounded-xl">

                  <!-- Profile image container -->
                  <div class="w-50 h-60 overflow-hidden border-3 border-zinc-800 rounded-xl mb-2">
                    <img class="w-full h-full object-cover object-center" src="<%= user.image %>" alt="person image">
                  </div>

                  <!-- User name -->
                  <h3>
                    <%= user.name %>
                  </h3>

                  <!-- User email (or fallback if missing) -->
                  <h4 class="text-zinc-500">
                    <% if(user.email){ %>
                      <%= user.email %>
                        <% } else { %>
                          email missing
                          <% } %>
                  </h4>

                  <!-- Edit and Delete links -->
                  <div class="flex justify-between mt-1 border-t-1 border-zinc-800">
                    <a href="/edituser/<%= user._id %>"
                      class="text-zinc-600 hover:text-zinc-500 pl-1 pr-1 rounded-lg mt-1">Edit</a>
                    <a href="/delete/<%= user._id %>"
                      class="text-red-900 hover:text-red-500 pl-1 pr-1 rounded-lg mt-1">Delete</a>
                  </div>
                </div>

                <% }); %> <!-- End of user loop -->

            </div>
            <% } %> <!-- End of conditional rendering -->

      </div>
    </main>
    <footer class="bg-zinc-900 text-center h-10  text-zinc-400 text-sm py-2">
      <a href="http://github.com/AKABharat">AKABharat &copy;</a>
    </footer>
  </body>

</html>